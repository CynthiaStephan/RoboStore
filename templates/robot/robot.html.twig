{% extends 'base.html.twig' %}

{% block title %}Hello RobotController!{% endblock %}

{% block body %}
    <style>
        .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
        .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    </style>

    <div class="example-wrapper">
        <h1>Hello {{ controller_name }}! ✅</h1>

        This friendly message is coming from:
        <ul>
            <li>Your controller at <code>/app/src/Controller/RobotController.php</code></li>
            <li>Your template at <code>/app/templates/robot/index.html.twig</code></li>
        </ul>

        {% for robot in robots %}
            <p>{{robot.name}}</p>
            <div class="description">{{robot.description|raw}}</div>
            <img src="{{ asset('/upload/robots/' ~ robot.image) }}" alt="{{ robot.name }}">
        {% endfor %}
    </div>
    
    <div class="navigation">
        {{ knp_pagination_render(robots) }}
    </div>
{% endblock %}

{% block script %}
    <script>
        function truncate(text, maxlength) {
            return (text.length > maxlength) ? text.slice(0, maxlength - 1) + '…' : text;
        }
        let descriptions = document.querySelectorAll('div.description');
        descriptions.forEach(description => {
            let truncatedText = truncate(description.textContent, 250);
            description.textContent = truncatedText;
        });

    </script>
{% endblock %}
